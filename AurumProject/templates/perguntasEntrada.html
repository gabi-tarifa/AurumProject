<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <title>Aurum - Vamos Começar</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/perguntasEntrada.css') }}">
    <link rel="shortcut icon" href="https://cdn-icons-png.flaticon.com/128/3975/3975233.png" type="image/x-icon">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
   
</head>
<body>
    <div id="app"></div>

    <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
    <script>
        new Vue({
            el: '#app',
            delimiters: ['[[', ']]'],
            template: `
                <div id="container">
                    <main class="quiz-container">
                        <h1>[[ perguntaAtual.desc_pergunta ]]</h1>
                        <p class="progress-label">{{ progressLabel }}</p><br>
                        

                        <div class="progress">
                            <div class="progress-bar" role="progressbar" 
                                 :style="{ width: progressPercentage + '%' }" 
                                 :aria-valuenow="progressPercentage" 
                                 aria-valuemin="0" 
                                 aria-valuemax="100">
                            </div>
                        </div>
                        <div class="options">
                            <button
                                v-for="(opcao, index) in respostas[i_pergunta_atual].desc_respostas"
                                :key="index"
                                @click="responderPergunta(index + 1)"
                                class="option"
                            >
                            [[ opcao ]]
                        </button>
                        </div>
                        <h3 id="progessaoPerguntas">0/12 respondidas</h3>
                    </main>
                </div>
            `,
            data() {
                return {
                    perguntas: [
    { numero_pergunta: 1, desc_pergunta: "Quando a taxa Selic é reduzida pelo Banco Central, qual tende a ser o principal impacto sobre o câmbio e os investimentos?", resposta_pergunta: 0 },
    { numero_pergunta: 2, desc_pergunta: "Um título de renda fixa pós-fixado atrelado ao CDI é mais indicado em qual cenário econômico?", resposta_pergunta: 0 },
    { numero_pergunta: 3, desc_pergunta: "Quando os gastos de uma família são maiores do que sua renda mensal, o resultado mais provável é:", resposta_pergunta: 0 },
    { numero_pergunta: 4, desc_pergunta: "A alíquota mínima do Imposto de Renda sobre fundos de investimento de longo prazo é aplicada após:", resposta_pergunta: 0 },
    { numero_pergunta: 5, desc_pergunta: "Sobre ações, qual alternativa está correta?", resposta_pergunta: 0 },
    { numero_pergunta: 6, desc_pergunta: "A sigla EBITDA representa:", resposta_pergunta: 0 },
    { numero_pergunta: 7, desc_pergunta: "O princípio de diversificação de investimentos está relacionado a:", resposta_pergunta: 0 },
    { numero_pergunta: 8, desc_pergunta: "O conceito de “Mark-to-Market” significa:", resposta_pergunta: 0 },
    { numero_pergunta: 9, desc_pergunta: "O índice Sharpe mede:", resposta_pergunta: 0 },
    { numero_pergunta: 10, desc_pergunta: "Um gasto pode ser classificado como supérfluo quando:", resposta_pergunta: 0 },
    { numero_pergunta: 11, desc_pergunta: "O que diferencia o Tesouro IPCA+ do Tesouro Prefixado?", resposta_pergunta: 0 },
    { numero_pergunta: 12, desc_pergunta: "Qual é o principal risco de um fundo imobiliário de tijolo (FIIs)?", resposta_pergunta: 0 }
],

respostas: [
    {
        numero_resposta: 1,
        desc_respostas: [
            "A moeda nacional tende a se valorizar, e os investimentos em renda fixa se tornam mais atrativos.",
            "A moeda nacional tende a se desvalorizar, e há migração para ativos de maior risco.", // correta (posição 2)
            "O câmbio permanece estável, e a bolsa tende a cair.",
            "A inflação tende a diminuir imediatamente."
        ]
    },
    {
        numero_resposta: 2,
        desc_respostas: [
            "Quando a taxa Selic está em tendência de alta.", // correta (posição 1)
            "Quando a inflação está caindo e a Selic estável.",
            "Quando o dólar está se valorizando.",
            "Quando há deflação persistente."
        ]
    },
    {
        numero_resposta: 3,
        desc_respostas: [
            "Formação de patrimônio",
            "Endividamento progressivo", // correta (posição 2)
            "Maior capacidade de poupança",
            "Estabilidade financeira"
        ]
    },
    {
        numero_resposta: 4,
        desc_respostas: [
            "180 dias",
            "360 dias",
            "720 dias", // correta (posição 3)
            "1.080 dias"
        ]
    },
    {
        numero_resposta: 5,
        desc_respostas: [
            "Dividendos pagos reduzem o preço da ação, mas não o valor da empresa", // correta (posição 1)
            "O pagamento de dividendos aumenta o valor da empresa.",
            "Juros sobre capital próprio são isentos de imposto de renda para o investidor.",
            "O fracionamento (split) reduz o valor de mercado da companhia."
        ]
    },
    {
        numero_resposta: 6,
        desc_respostas: [
            "Lucro líquido após impostos.",
            "Lucro antes de juros, impostos, depreciação e amortização.", // correta (posição 2)
            "Retorno sobre o investimento total.",
            "Receita líquida antes dos custos operacionais."
        ]
    },
    {
        numero_resposta: 7,
        desc_respostas: [
            "Concentrar todo o capital em uma única aplicação para aumentar ganhos",
            "Distribuir os recursos em diferentes opções, reduzindo riscos", // correta (posição 2)
            "Guardar todo o dinheiro em um único banco para maior controle",
            "Manter apenas aplicações de renda fixa para evitar perdas"
        ]
    },
    {
        numero_resposta: 8,
        desc_respostas: [
            "Avaliar os ativos pelo custo histórico.",
            "Avaliar os ativos pelo valor de mercado atual.", // correta (posição 2)
            "Ajustar o lucro líquido para eliminar efeitos contábeis.",
            "Calcular o valor presente líquido de um título."
        ]
    },
    {
        numero_resposta: 9,
        desc_respostas: [
            "O risco de crédito de um título.",
            "A rentabilidade líquida após impostos.",
            "O retorno excedente de um investimento em relação ao seu risco.", // correta (posição 3)
            "A correlação entre dois ativos"
        ]
    },
    {
        numero_resposta: 10,
        desc_respostas: [
            "É essencial para manter necessidades básicas",
            "Está ligado a compromissos fixos, como moradia",
            "Está associado a consumo de lazer ou luxo sem planejamento", // correta (posição 3)
            "Não pode ser evitado de forma alguma"
        ]
    },
    {
        numero_resposta: 11,
        desc_respostas: [
            "O primeiro paga juros fixos, o segundo varia conforme a inflação.",
            "O Tesouro IPCA+ tem rentabilidade atrelada à inflação mais juros reais.", // correta (posição 2)
            "O Tesouro Prefixado protege contra a perda do poder de compra.",
            "O IPCA+ é isento de imposto de renda para PF."
        ]
    },
    {
        numero_resposta: 12,
        desc_respostas: [
            "Variação cambial.",
            "Aumento da taxa de juros, que reduz o valor das cotas.", // correta (posição 2)
            "Inflação baixa demais.",
            "Aumento no número de investidores."
        ]
    }
],

respostasCorretas: [2,1,2,3,1,2,2,2,3,3,2,2],
                    i_pergunta_atual: 0
                }
            },
            computed: {
                perguntaAtual() {
                    if (this.i_pergunta_atual >= this.perguntas.length) {
                        return this.perguntas[this.perguntas.length - 1]; 
                    }
                    return this.perguntas[this.i_pergunta_atual];
                },
                progressPercentage() {
                    if (this.perguntas.length === 0) return 0;
                    return ((this.i_pergunta_atual ) / this.perguntas.length) * 100;
                },
                progressLabel() {
                    return `${this.i_pergunta_atual + 1}/${this.perguntas.length}`;
                }
            },
            methods: {
                responderPergunta: function(resposta) {
                    this.perguntas[this.i_pergunta_atual].resposta_pergunta = resposta;
                    perguntasRespondidas = this.perguntas.filter(p => p.resposta_pergunta > 0).length;
                    totalPerguntas = this.perguntas.length;

                    if (this.i_pergunta_atual < this.perguntas.length - 1) {
                        this.i_pergunta_atual++;
                    } else {
                        this.perguntas.forEach((p, index) => {
                            const alternativa = p.resposta_pergunta;
                    });
                    let acertos = 0;
                    this.perguntas.forEach((p, index) => {
                        const respostaCorreta = this.respostasCorretas[index];
                        if (p.resposta_pergunta == respostaCorreta) {
                            acertos++;
                        }
                    });
                    sessionStorage.setItem('acertos', acertos);
                    window.location.href = "/pre-entrada";
                }
                    document.getElementById("progessaoPerguntas").textContent = perguntasRespondidas + "/" + totalPerguntas + "respondidas"; 
                },getOptionDescription(value) {
                    const perguntaIndex = this.i_pergunta_atual;
                    const respostas = this.respostas[perguntaIndex].desc_respostas;
                    return respostas[value - 1];
                },
                getTotalPontuation(){


                }
            }
        })
    </script>
        <script>
  // valor inicial vindo do backend, só na primeira vez
  const sonsIniciais = {{ 'true' if sons_ativos else 'false' }};
  // se já tiver no localStorage, usa ele; senão, define o inicial
  if (localStorage.getItem('sons_ativos') === null) {
    localStorage.setItem('sons_ativos', sonsIniciais ? 'true' : 'false');
  }
  window.SONS_ATIVOS = localStorage.getItem('sons_ativos') == 'true';
  // Valor dinâmico vindo do backend
  window.MUSICA_ATIVA = {{ 'true' if musica_ativa else 'false' }};
  const musicasUsuario = {{ musicas_usuario | tojson | safe }};
  const musicadasessao = {{ musica_tocada | tojson }};
  
</script>
    <script src="{{ url_for('static', filename='js/sounds.js') }}"></script>
    <script src="{{ url_for('static', filename='js/musics.js') }}"></script>
</body>
</html>