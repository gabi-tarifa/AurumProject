<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <title>Aurum - Vamos Come√ßar</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/perguntasEntrada.css') }}">
    <link rel="shortcut icon" href="https://cdn-icons-png.flaticon.com/128/3975/3975233.png" type="image/x-icon">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
   
</head>
<body>
    <div id="app"></div>

    <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
    <script>
        new Vue({
            el: '#app',
            delimiters: ['[[', ']]'],
            template: `
                <div id="container">
                    <main class="quiz-container">
                        <h1>[[ perguntaAtual.desc_pergunta ]]</h1>
                        <p class="progress-label">{{ progressLabel }}</p><br>
                        

                        <div class="progress">
                            <div class="progress-bar" role="progressbar" 
                                 :style="{ width: progressPercentage + '%' }" 
                                 :aria-valuenow="progressPercentage" 
                                 aria-valuemin="0" 
                                 aria-valuemax="100">
                            </div>
                        </div>
                        <div class="options">
                            <button
                                v-for="(opcao, index) in respostas[i_pergunta_atual].desc_respostas"
                                :key="index"
                                @click="responderPergunta(index + 1)"
                                class="option"
                            >
                            [[ opcao ]]
                        </button>
                        </div>
                        <h3 id="progessaoPerguntas">0/12 respondidas</h3>
                    </main>
                </div>
            `,
            data() {
                return {
                    perguntas: [
    { numero_pergunta: 1, desc_pergunta: "Quando a taxa Selic √© reduzida pelo Banco Central, qual tende a ser o principal impacto sobre o c√¢mbio e os investimentos?", resposta_pergunta: 0 },
    { numero_pergunta: 2, desc_pergunta: "Um t√≠tulo de renda fixa p√≥s-fixado atrelado ao CDI √© mais indicado em qual cen√°rio econ√¥mico?", resposta_pergunta: 0 },
    { numero_pergunta: 3, desc_pergunta: "Quando os gastos de uma fam√≠lia s√£o maiores do que sua renda mensal, o resultado mais prov√°vel √©:", resposta_pergunta: 0 },
    { numero_pergunta: 4, desc_pergunta: "A al√≠quota m√≠nima do Imposto de Renda sobre fundos de investimento de longo prazo √© aplicada ap√≥s:", resposta_pergunta: 0 },
    { numero_pergunta: 5, desc_pergunta: "Sobre a√ß√µes, qual alternativa est√° correta?", resposta_pergunta: 0 },
    { numero_pergunta: 6, desc_pergunta: "A sigla EBITDA representa:", resposta_pergunta: 0 },
    { numero_pergunta: 7, desc_pergunta: "O princ√≠pio de diversifica√ß√£o de investimentos est√° relacionado a:", resposta_pergunta: 0 },
    { numero_pergunta: 8, desc_pergunta: "O conceito de ‚ÄúMark-to-Market‚Äù significa:", resposta_pergunta: 0 },
    { numero_pergunta: 9, desc_pergunta: "O √≠ndice Sharpe mede:", resposta_pergunta: 0 },
    { numero_pergunta: 10, desc_pergunta: "Um gasto pode ser classificado como sup√©rfluo quando:", resposta_pergunta: 0 },
    { numero_pergunta: 11, desc_pergunta: "O que diferencia o Tesouro IPCA+ do Tesouro Prefixado?", resposta_pergunta: 0 },
    { numero_pergunta: 12, desc_pergunta: "Qual √© o principal risco de um fundo imobili√°rio de tijolo (FIIs)?", resposta_pergunta: 0 }
],

respostas: [
    {
        numero_resposta: 1,
        desc_respostas: [
            "A moeda nacional tende a se valorizar, e os investimentos em renda fixa se tornam mais atrativos.",
            "A moeda nacional tende a se desvalorizar, e h√° migra√ß√£o para ativos de maior risco.", // correta (posi√ß√£o 2)
            "O c√¢mbio permanece est√°vel, e a bolsa tende a cair.",
            "A infla√ß√£o tende a diminuir imediatamente."
        ]
    },
    {
        numero_resposta: 2,
        desc_respostas: [
            "Quando a taxa Selic est√° em tend√™ncia de alta.", // correta (posi√ß√£o 1)
            "Quando a infla√ß√£o est√° caindo e a Selic est√°vel.",
            "Quando o d√≥lar est√° se valorizando.",
            "Quando h√° defla√ß√£o persistente."
        ]
    },
    {
        numero_resposta: 3,
        desc_respostas: [
            "Forma√ß√£o de patrim√¥nio",
            "Endividamento progressivo", // correta (posi√ß√£o 2)
            "Maior capacidade de poupan√ßa",
            "Estabilidade financeira"
        ]
    },
    {
        numero_resposta: 4,
        desc_respostas: [
            "180 dias",
            "360 dias",
            "720 dias", // correta (posi√ß√£o 3)
            "1.080 dias"
        ]
    },
    {
        numero_resposta: 5,
        desc_respostas: [
            "Dividendos pagos reduzem o pre√ßo da a√ß√£o, mas n√£o o valor da empresa", // correta (posi√ß√£o 1)
            "O pagamento de dividendos aumenta o valor da empresa.",
            "Juros sobre capital pr√≥prio s√£o isentos de imposto de renda para o investidor.",
            "O fracionamento (split) reduz o valor de mercado da companhia."
        ]
    },
    {
        numero_resposta: 6,
        desc_respostas: [
            "Lucro l√≠quido ap√≥s impostos.",
            "Lucro antes de juros, impostos, deprecia√ß√£o e amortiza√ß√£o.", // correta (posi√ß√£o 2)
            "Retorno sobre o investimento total.",
            "Receita l√≠quida antes dos custos operacionais."
        ]
    },
    {
        numero_resposta: 7,
        desc_respostas: [
            "Concentrar todo o capital em uma √∫nica aplica√ß√£o para aumentar ganhos",
            "Distribuir os recursos em diferentes op√ß√µes, reduzindo riscos", // correta (posi√ß√£o 2)
            "Guardar todo o dinheiro em um √∫nico banco para maior controle",
            "Manter apenas aplica√ß√µes de renda fixa para evitar perdas"
        ]
    },
    {
        numero_resposta: 8,
        desc_respostas: [
            "Avaliar os ativos pelo custo hist√≥rico.",
            "Avaliar os ativos pelo valor de mercado atual.", // correta (posi√ß√£o 2)
            "Ajustar o lucro l√≠quido para eliminar efeitos cont√°beis.",
            "Calcular o valor presente l√≠quido de um t√≠tulo."
        ]
    },
    {
        numero_resposta: 9,
        desc_respostas: [
            "O risco de cr√©dito de um t√≠tulo.",
            "A rentabilidade l√≠quida ap√≥s impostos.",
            "O retorno excedente de um investimento em rela√ß√£o ao seu risco.", // correta (posi√ß√£o 3)
            "A correla√ß√£o entre dois ativos"
        ]
    },
    {
        numero_resposta: 10,
        desc_respostas: [
            "√â essencial para manter necessidades b√°sicas",
            "Est√° ligado a compromissos fixos, como moradia",
            "Est√° associado a consumo de lazer ou luxo sem planejamento", // correta (posi√ß√£o 3)
            "N√£o pode ser evitado de forma alguma"
        ]
    },
    {
        numero_resposta: 11,
        desc_respostas: [
            "O primeiro paga juros fixos, o segundo varia conforme a infla√ß√£o.",
            "O Tesouro IPCA+ tem rentabilidade atrelada √† infla√ß√£o mais juros reais.", // correta (posi√ß√£o 2)
            "O Tesouro Prefixado protege contra a perda do poder de compra.",
            "O IPCA+ √© isento de imposto de renda para PF."
        ]
    },
    {
        numero_resposta: 12,
        desc_respostas: [
            "Varia√ß√£o cambial.",
            "Aumento da taxa de juros, que reduz o valor das cotas.", // correta (posi√ß√£o 2)
            "Infla√ß√£o baixa demais.",
            "Aumento no n√∫mero de investidores."
        ]
    }
],

respostasCorretas: [2,1,2,3,1,2,2,2,3,3,2,2],
                    i_pergunta_atual: 0
                }
            },
            computed: {
                perguntaAtual() {
                    if (this.i_pergunta_atual >= this.perguntas.length) {
                        return this.perguntas[this.perguntas.length - 1]; 
                    }
                    return this.perguntas[this.i_pergunta_atual];
                },
                progressPercentage() {
                    if (this.perguntas.length === 0) return 0;
                    return ((this.i_pergunta_atual ) / this.perguntas.length) * 100;
                },
                progressLabel() {
                    return `${this.i_pergunta_atual + 1}/${this.perguntas.length}`;
                }
            },
            methods: {
                responderPergunta: function(resposta) {
                    this.perguntas[this.i_pergunta_atual].resposta_pergunta = resposta;
                    perguntasRespondidas = this.perguntas.filter(p => p.resposta_pergunta > 0).length;
                    totalPerguntas = this.perguntas.length;

                    if (this.i_pergunta_atual < this.perguntas.length - 1) {
                        this.i_pergunta_atual++;
                    } else {
                        this.perguntas.forEach((p, index) => {
                            const alternativa = p.resposta_pergunta;
                    });
                    let acertos = 0;
                    this.perguntas.forEach((p, index) => {
                        const respostaCorreta = this.respostasCorretas[index];
                        if (p.resposta_pergunta == respostaCorreta) {
                            acertos++;
                        }
                    });
                    sessionStorage.setItem('acertos', acertos);
                    fetch("/salvar_modulo_inicial", {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({ acertos })
                    }).then(() => {
                        window.location.href = "/pre-entrada";
                    });
                }
                    document.getElementById("progessaoPerguntas").textContent = perguntasRespondidas + "/" + totalPerguntas + "respondidas";
                    inicializarSons(); 
                },getOptionDescription(value) {
                    const perguntaIndex = this.i_pergunta_atual;
                    const respostas = this.respostas[perguntaIndex].desc_respostas;
                    return respostas[value - 1];
                },
                getTotalPontuation(){


                }
            }
        })
    </script>
        <script>
  // valor inicial vindo do backend, s√≥ na primeira vez
  const sonsIniciais = {{ 'true' if sons_ativos else 'false' }};
  // se j√° tiver no localStorage, usa ele; sen√£o, define o inicial
  if (localStorage.getItem('sons_ativos') === null) {
    localStorage.setItem('sons_ativos', sonsIniciais ? 'true' : 'false');
  }
  window.SONS_ATIVOS = localStorage.getItem('sons_ativos') == 'true';
  // Valor din√¢mico vindo do backend
  window.MUSICA_ATIVA = {{ 'true' if musica_ativa else 'false' }};
  const musicadasessao = {{ musica_tocada | tojson }};
  const volumeMusicaBanco = {{ volume_musica if volume_musica else 0  }}
  
</script>
    <script src="{{ url_for('static', filename='js/sounds.js') }}"></script>
    <script src="{{ url_for('static', filename='js/musics.js') }}"></script>
    <script>
        // üîÅ Eventos globais ‚Äî funcionam mesmo com DOM din√¢mico (Vue, etc)
document.addEventListener("click", (e) => {
  if (window.SONS_ATIVOS != true && window.SONS_ATIVOS != 'true') return;
  const target = e.target;
  if (target.matches("button, a, input[type='submit'], select, option, input[type='checkbox'], div#openMais, div.ranking-header h1, div.etapa.concluida, div.etapa.desbloquada")) {
    tocarSom("click");
  }
});

document.addEventListener("mouseenter", (e) => {
  if (window.SONS_ATIVOS != true && window.SONS_ATIVOS != 'true') return;
  const target = e.target;
  if (target.matches("button, a, input[type='submit'], select, option, input[type='checkbox'], div#openMais, div.ranking-header h1, div.etapa.concluida, div.etapa.desbloquada")) {
    tocarSom("hover");
  }
}, true); // 'true' garante captura mesmo com bubbling interrompido
    </script>
</body>
</html>